# Codex Dev Prompt â€” Story 12.1 (Gates runner)

Source of truth:
- `_bmad-output/implementation-artifacts/12-1-gates-runner-executes-stable-gate-ids-and-writes-deterministic-artifacts.md`

Goal:
- Implement a deterministic gates runner keyed by stable `gate_id`.
- Deterministic artifacts under `_bmad-output/implementation-artifacts/`.
- No-leak: artifacts include only allow-listed/safe evidence.

Must-haves:
- Stable `gate_id` catalog + deterministic mapping.
- Record per-gate: `result`, `duration_ms`, and on failure: `failure_class` +
  `next_action_hint` (deterministic, no sensitive detail).

Integration note:
- `.github/workflows/gates.yml` already exists; wire it to the new runner so the
  `v1-gates` job (workflow_dispatch) actually executes gates.

Verification:
- Run the runner locally for at least one gate and show artifacts.
- `make lint` + targeted `make test-back` if code changes.

Traceability:
- Create `_bmad-output/implementation-artifacts/runs/<ts>-12.1/` with:
  `report.md`, `commands.log`, `files-changed.txt`, `gates.md`.
- Update `_bmad-output/implementation-artifacts/latest.txt`,
  `_bmad-output/implementation-artifacts/sprint-status.yaml`, and Dev Agent
  Record in the story file.
